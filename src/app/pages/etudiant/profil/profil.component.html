<app-header-user></app-header-user>


<div class="content-wrapper">

    <section class="content-header">
        <div class="container-fluid">
            <div class="row mb-2">
                <div class="col-sm-6">
                    <h1>Mon Profil</h1>
                </div>
                <div class="col-sm-6">
                    <ol class="breadcrumb float-sm-right">
                        <li class="breadcrumb-item">
                            <a [routerLink]="['/etudiant']">Accueil</a>
                        </li>
                        <li class="breadcrumb-item active" >
                            profil </li>
                    </ol>
                </div>
            </div>
        </div>
        <!-- /.container-fluid -->
    </section>


    <section class="content">
        <div class="card">

            <div class="card-header border-transparent">
                <h3 class="card-title"> Modification des informations </h3>

                <div class="card-tools">
                    <h6>code  : {{ user.code }} </h6>
                    
                    
                </div>
            </div>
            <!-- /.card-header -->
            <div class="card-body p-0">

                <div class="container">
                    <form (ngSubmit)="onSubmit()" [formGroup]="form">

                        <div class="card-body">

                            <div class="form-row">
                                <div class="form-group col-md-6">
                                    <label for="prenom">prenom</label>
                                    <input type="text" class="form-control" id="prenom" formControlName="prenom"
                                        aria-describedby="prenom" [(ngModel)]="user.prenom" pattern="^[a-zA-Z0-9_ ]*$"
                                        placeholder="prenom">
                                    <div *ngIf="f['prenom'].touched && f['prenom'].invalid" class="alert alert-danger">
                                        <div *ngIf="f['prenom'].errors && f['prenom'].errors['required']">prenom non
                                            valide</div>
                                        <div *ngIf="f['nom'].errors && f['nom'].errors['minlength']">prenom trop petit
                                        </div>
                                    </div>

                                </div>

                                <div class="form-group col-md-6">
                                    <label for="nom">nom</label>
                                    <input type="text" class="form-control" id="nom" formControlName="nom"
                                        aria-describedby="nom" [(ngModel)]="user.nom" pattern="^[a-zA-Z0-9_ ]*$"
                                        placeholder="nom">
                                    <div *ngIf="f['nom'].touched && f['nom'].invalid" class="alert alert-danger">
                                        <div *ngIf="f['nom'].errors && f['nom'].errors['required']">nom non valide</div>
                                        <div *ngIf="f['nom'].errors && f['nom'].errors['minlength']">nom trop petit
                                        </div>
                                    </div>

                                </div>


                            </div>

                            <div class="form-row">
                                <div class="form-group col-md-4">

                                    <label for="adresse">adresse</label>
                                    <input type="text" class="form-control" id="adresse" formControlName="adresse"
                                        aria-describedby="adresse" [(ngModel)]="user.adresse" pattern="^[a-zA-Z0-9_ ]*$"
                                        placeholder="adresse">
                                    <div *ngIf="f['adresse'].touched && f['adresse'].invalid"
                                        class="alert alert-danger">
                                        <div *ngIf="f['adresse'].errors && f['adresse'].errors['required']">adresse non
                                            valide</div>
                                        <div *ngIf="f['adresse'].errors && f['adresse'].errors['minlength']">adresse
                                            trop petit
                                        </div>
                                    </div>
                                </div>


                                <div class="form-group col-md-4">
                                    <label for="tel">tel</label>
                                    <input type="text" class="form-control" [(ngModel)]="user.tel" id="tel"
                                        formControlName="tel" aria-describedby="tel"
                                        pattern="[78]|[76]|[77]|[75]-[0-9]{3}-[0-9]{2}-[0-9]{2}" placeholder="tel">
                                    <span>format 77-000-00-00</span>
                                    <div *ngIf="f['tel'].touched && f['tel'].invalid" class="alert alert-danger">
                                        <div *ngIf="f['tel'].errors && f['tel'].errors['required']">tel non valide</div>
                                        <div *ngIf="f['tel'].errors && f['tel'].errors['pattern']">format non valide
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group col-md-4">

                                    <label for="genre">genre</label>
                                    <select id="genre" name="sexe" [attr.disabled]='true'  formControlName="sexe" class="form-control" >
                                        <option value="Masculin" [selected]="user.sexe === 'Masculin'">Masculin</option>
                                        <option value="Féminin" [selected]="user.sexe === 'Féminin'">Féminin</option>
                                    </select>
                                    

                                </div>
                            </div>

                            <div class="form-row">

                                <div class="form-group col-md-6">
                                    <label for="lieu">lieu </label>
                                    <input type="text" class="form-control" id="lieu" [(ngModel)]="user.lieuNaissance"
                                        formControlName="lieuNaissance" pattern="^[a-zA-Z0-9_ ]*$"
                                        aria-describedby="lieuNaissance" placeholder="lieu de Naissance">

                                    <div *ngIf="f['lieuNaissance'].touched && f['lieuNaissance'].invalid"
                                        class="alert alert-danger">
                                        <div *ngIf="f['lieuNaissance'].errors && f['lieuNaissance'].errors['required']">
                                            lieu de Naissance
                                            obligatoire</div>
                                        <div *ngIf="f['lieuNaissance'].errors && f['lieuNaissance'].errors['pattern']">
                                            format non valide
                                        </div>
                                    </div>

                                </div>
                                <div class="form-group col-md-6">
                                    <label for="dateNaissance">date de Naissance</label>
                                    <input type="date" class="form-control" id="dateNaissance" [(ngModel)]="dateNaissance"
                                        value="{{ dateNaissance }}" 
                                        formControlName="dateNaissance" aria-describedby="dateNaissance"
                                        placeholder="dateNaissance">

                                    <div *ngIf="f['dateNaissance'].touched && f['dateNaissance'].invalid"
                                        class="alert alert-danger">
                                        <div *ngIf="f['dateNaissance'].errors && f['dateNaissance'].errors['required']">
                                            date de Naissance
                                            obligatoire</div>

                                    </div>

                                </div>

                                

                            </div>

                            <div class="form-row">
                                <div class="form-group col-md-12">
                                    <label for="email">email</label>
                                    <input type="email" class="form-control" [(ngModel)]="user.email" id="tel"
                                        formControlName="email" aria-describedby="email" placeholder="email">

                                    <div *ngIf="f['email'].touched && f['email'].invalid" class="alert alert-danger">
                                        <div *ngIf="f['email'].errors && f['email'].errors['required']">email
                                            obligatoire</div>
                                        <div *ngIf="f['email'].errors && f['email'].errors['pattern']">format non valide
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="form-row">
                                <div class="form-group col-md-6">
                                    <label for="password">Password <span>*</span> </label>
                                    <input type="password" formControlName="password"
                                        id="password" pattern="[a-zAZ0-9 ]{5,}" value=""
                                        class="form-control" required>
                                    <div *ngIf="f['password'].touched && f['password'].invalid"
                                        class="alert alert-danger">
                                        <div
                                            *ngIf="f['password'].errors && f['password'].errors['required']">
                                            password
                                            obligatoire</div>
                                        <div
                                            *ngIf="f['password'].errors && f['password'].errors['minlength']">
                                            password
                                            trop petit
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group col-md-6">
                                    <label for="Confirm">Confirm Password <span>*</span>
                                    </label>
                                    <input type="password" formControlName="Confirm"
                                        id="Confirm" pattern="[a-zAZ0-9 ]{5,}" value=""
                                        class="form-control" required>
                                    <div *ngIf="f['Confirm'].touched && f['Confirm'].invalid"
                                        class="alert alert-danger">
                                        <div
                                            *ngIf="f['Confirm'].errors && f['Confirm'].errors['required']">
                                            password
                                            obligatoire</div>
                                        <div
                                            *ngIf="f['Confirm'].errors && f['Confirm'].errors['matchPassword']">
                                            les mots de passe ne correspondent pas

                                        </div>
                                    </div>
                                </div>
                            </div>


                            <div class="row center">
                                <div class="text-center mt-3 text-secondary">
                                    <button type="submit"  [disabled]="!form.valid" class="btn btn-primary px-4">valider</button>

                                </div>
                            </div>

                        </div>
                    </form>
                </div>

            </div>

        </div>


    </section>

</div>